<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - WoodAdvent</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #1A237E;
            --secondary-color: #283593;
            --accent-color: #5C6BC0;
            --light-color: #E8EAF6;
            --dark-color: #0D1B2A;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --error-color: #F44336;
            --processing-color: #2196F3;
            --completed-color: #4CAF50;
            --pending-color: #FF9800;
            --cancelled-color: #F44336;
            --urgent-color: #FF5252;
        }
        
        body {
            background: linear-gradient(135deg, #E3F2FD 0%, #F3E5F5 100%);
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 20px rgba(26, 35, 126, 0.3);
        }
        
        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
            color: white;
        }
        
        .logo i {
            color: var(--light-color);
        }
        
        .admin-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .admin-name {
            font-weight: 500;
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* New Orders Alert */
        .new-orders-alert {
            background: linear-gradient(135deg, var(--urgent-color), #FF8A80);
            color: white;
            padding: 0.8rem 1.5rem;
            margin: 1rem 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 15px rgba(255, 82, 82, 0.3);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 4px 15px rgba(255, 82, 82, 0.3); }
            50% { box-shadow: 0 4px 25px rgba(255, 82, 82, 0.5); }
            100% { box-shadow: 0 4px 15px rgba(255, 82, 82, 0.3); }
        }
        
        .new-orders-alert.hidden {
            display: none;
        }
        
        .alert-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-btn {
            background: white;
            color: var(--urgent-color);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .alert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* Dashboard */
        .dashboard {
            padding: 2rem 0;
        }
        
        .dashboard-header {
            margin-bottom: 2rem;
        }
        
        .dashboard-title {
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .dashboard-subtitle {
            color: #666;
            font-size: 1.1rem;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
            border-left: 4px solid;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card.total {
            border-left-color: var(--primary-color);
        }
        
        .stat-card.processing {
            border-left-color: var(--processing-color);
        }
        
        .stat-card.completed {
            border-left-color: var(--completed-color);
        }
        
        .stat-card.pending {
            border-left-color: var(--pending-color);
        }
        
        .stat-card.urgent {
            border-left-color: var(--urgent-color);
            animation: urgentPulse 2s infinite;
        }
        
        @keyframes urgentPulse {
            0% { border-left-color: var(--urgent-color); }
            50% { border-left-color: #FF8A80; }
            100% { border-left-color: var(--urgent-color); }
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .stat-icon.total {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        }
        
        .stat-icon.processing {
            background: linear-gradient(135deg, var(--processing-color), #42A5F5);
        }
        
        .stat-icon.completed {
            background: linear-gradient(135deg, var(--completed-color), #66BB6A);
        }
        
        .stat-icon.pending {
            background: linear-gradient(135deg, var(--pending-color), #FFB74D);
        }
        
        .stat-icon.urgent {
            background: linear-gradient(135deg, var(--urgent-color), #FF8A80);
        }
        
        .stat-content h3 {
            font-size: 2rem;
            margin-bottom: 0.2rem;
        }
        
        .stat-content p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .stat-content .stat-change {
            font-size: 0.8rem;
            margin-top: 0.3rem;
        }
        
        .stat-change.positive {
            color: var(--success-color);
        }
        
        .stat-change.negative {
            color: var(--error-color);
        }
        
        /* Controls */
        .controls {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            justify-content: space-between;
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 3rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }
        
        .filter-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 0.6rem 1.2rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn:hover {
            background: var(--light-color);
        }
        
        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .date-filter {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .date-filter input {
            padding: 0.6rem;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        /* Orders Table */
        .orders-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .section-header {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-header h2 {
            color: var(--primary-color);
        }
        
        .orders-count {
            background: var(--light-color);
            color: var(--primary-color);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .orders-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .orders-table th {
            background: var(--light-color);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--primary-color);
            border-bottom: 2px solid #ddd;
        }
        
        .orders-table td {
            padding: 1rem;
            border-bottom: 1px solid #eee;
            vertical-align: top;
        }
        
        .orders-table tr:hover {
            background: #f9f9f9;
        }
        
        .orders-table tr.new-order {
            background: rgba(255, 152, 0, 0.05);
            animation: highlightRow 3s ease;
        }
        
        @keyframes highlightRow {
            0% { background: rgba(255, 152, 0, 0.3); }
            100% { background: rgba(255, 152, 0, 0.05); }
        }
        
        .order-id {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .order-id.new::after {
            content: 'üÜï';
            margin-left: 5px;
            font-size: 0.8em;
            color: var(--urgent-color);
        }
        
        .order-date {
            color: #666;
            font-size: 0.9rem;
        }
        
        .customer-info {
            font-size: 0.9rem;
        }
        
        .customer-name {
            font-weight: 600;
            margin-bottom: 0.2rem;
        }
        
        .customer-phone {
            color: #666;
        }
        
        .items-list {
            font-size: 0.9rem;
            max-width: 200px;
        }
        
        .item-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.3rem;
        }
        
        .item-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 120px;
        }
        
        .item-quantity {
            color: #666;
        }
        
        .order-total {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .status-processing {
            background: rgba(33, 150, 243, 0.1);
            color: var(--processing-color);
        }
        
        .status-completed {
            background: rgba(76, 175, 80, 0.1);
            color: var(--completed-color);
        }
        
        .status-pending {
            background: rgba(255, 152, 0, 0.1);
            color: var(--pending-color);
        }
        
        .status-cancelled {
            background: rgba(244, 67, 54, 0.1);
            color: var(--cancelled-color);
        }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            padding: 0.4rem 0.8rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-view {
            background: var(--light-color);
            color: var(--primary-color);
        }
        
        .btn-view:hover {
            background: #e1e5f9;
        }
        
        .btn-process {
            background: rgba(33, 150, 243, 0.1);
            color: var(--processing-color);
        }
        
        .btn-process:hover {
            background: rgba(33, 150, 243, 0.2);
        }
        
        .btn-complete {
            background: rgba(76, 175, 80, 0.1);
            color: var(--completed-color);
        }
        
        .btn-complete:hover {
            background: rgba(76, 175, 80, 0.2);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        
        .modal-content {
            background: white;
            border-radius: 10px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalAppear 0.3s ease;
        }
        
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            color: var(--primary-color);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--error-color);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .order-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }
        
        .detail-section {
            margin-bottom: 2rem;
        }
        
        .detail-section h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-section h4 i {
            color: var(--accent-color);
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px dashed #eee;
        }
        
        .detail-label {
            color: #666;
            font-weight: 500;
            min-width: 150px;
        }
        
        .detail-value {
            text-align: right;
            max-width: 250px;
            word-break: break-word;
        }
        
        .items-details {
            margin-top: 1rem;
        }
        
        .item-detail {
            background: var(--light-color);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary-color);
        }
        
        .modal-actions {
            padding: 1.5rem;
            border-top: 1px solid #eee;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary:hover {
            background: var(--secondary-color);
        }
        
        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-secondary:hover {
            background: var(--light-color);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            padding: 1.5rem;
            border-top: 1px solid #eee;
        }
        
        .page-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .page-btn:hover {
            background: var(--light-color);
        }
        
        .page-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1001;
            transform: translateX(150%);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-left: 4px solid;
        }
        
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .notification.success {
            border-left-color: var(--success-color);
        }
        
        .notification.error {
            border-left-color: var(--error-color);
        }
        
        .notification.warning {
            border-left-color: var(--warning-color);
        }
        
        .notification.info {
            border-left-color: var(--processing-color);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #666;
        }
        
        .empty-state i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 1rem;
        }
        
        /* Status Timeline */
        .status-timeline {
            margin-top: 1.5rem;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .timeline-item.active {
            background: var(--light-color);
            border-left: 3px solid var(--primary-color);
        }
        
        .timeline-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .timeline-item.active .timeline-icon {
            background: var(--primary-color);
        }
        
        .timeline-content {
            flex: 1;
        }
        
        .timeline-content p {
            margin: 0;
            color: #666;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .orders-table {
                display: block;
                overflow-x: auto;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .order-details-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .modal-actions button {
                width: 100%;
            }
            
            .detail-row {
                flex-direction: column;
                gap: 0.3rem;
            }
            
            .detail-label, .detail-value {
                text-align: left;
                min-width: auto;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <i class="fas fa-tools"></i>
                    <span>WoodAdvent Admin</span>
                </a>
                
                <div class="admin-info">
                    <div class="admin-name">
                        <i class="fas fa-user-circle"></i> –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                    </div>
                    <button class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- New Orders Alert -->
    <div class="container">
        <div class="new-orders-alert hidden" id="new-orders-alert">
            <div class="alert-content">
                <i class="fas fa-bell"></i>
                <span id="alert-message">–ù–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤: <strong>0</strong></span>
            </div>
            <button class="alert-btn" id="show-new-orders">–ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–µ</button>
        </div>
    </div>

    <!-- Dashboard -->
    <section class="dashboard">
        <div class="container">
            <div class="dashboard-header">
                <h1 class="dashboard-title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏</h1>
                <p class="dashboard-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–∫–∞–∑–∞–º–∏ –Ω–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä–∏</p>
            </div>
            
            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card total">
                    <div class="stat-icon total">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-orders">0</h3>
                        <p>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</p>
                        <div class="stat-change" id="total-change"></div>
                    </div>
                </div>
                
                <div class="stat-card processing">
                    <div class="stat-icon processing">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="processing-orders">0</h3>
                        <p>–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</p>
                        <div class="stat-change" id="processing-change"></div>
                    </div>
                </div>
                
                <div class="stat-card completed">
                    <div class="stat-icon completed">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="completed-orders">0</h3>
                        <p>–ó–∞–≤–µ—Ä—à–µ–Ω–æ</p>
                        <div class="stat-change" id="completed-change"></div>
                    </div>
                </div>
                
                <div class="stat-card pending urgent">
                    <div class="stat-icon urgent">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="pending-orders">0</h3>
                        <p>–û–∂–∏–¥–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏</p>
                        <div class="stat-change" id="pending-change"></div>
                    </div>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ ID, –∏–º–µ–Ω–∏, —Ç–µ–ª–µ—Ñ–æ–Ω—É, email...">
                </div>
                
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                    <button class="filter-btn" data-filter="pending">üÜï –ù–æ–≤—ã–µ</button>
                    <button class="filter-btn" data-filter="processing">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</button>
                    <button class="filter-btn" data-filter="completed">–ó–∞–≤–µ—Ä—à–µ–Ω—ã</button>
                    <button class="filter-btn" data-filter="cancelled">–û—Ç–º–µ–Ω–µ–Ω—ã</button>
                </div>
                
                <div class="date-filter">
                    <input type="date" id="date-from">
                    <span>‚Äî</span>
                    <input type="date" id="date-to">
                </div>
            </div>
            
            <!-- Orders Table -->
            <div class="orders-section">
                <div class="section-header">
                    <h2>–ó–∞–∫–∞–∑—ã</h2>
                    <span class="orders-count" id="orders-count">0 –∑–∞–∫–∞–∑–æ–≤</span>
                </div>
                
                <div class="table-container">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th style="width: 120px;">ID –∑–∞–∫–∞–∑–∞</th>
                                <th style="width: 150px;">–î–∞—Ç–∞</th>
                                <th style="width: 200px;">–ö–ª–∏–µ–Ω—Ç</th>
                                <th style="width: 250px;">–¢–æ–≤–∞—Ä—ã</th>
                                <th style="width: 120px;">–°—É–º–º–∞</th>
                                <th style="width: 120px;">–°—Ç–∞—Ç—É—Å</th>
                                <th style="width: 180px;">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="orders-table-body">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="empty-state" class="empty-state" style="display: none;">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>–ó–∞–∫–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- Pagination will be generated here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Order Details Modal -->
    <div class="modal" id="order-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ <span id="modal-order-id"></span></h3>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="order-details-grid">
                    <div>
                        <div class="detail-section">
                            <h4><i class="fas fa-user"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ</h4>
                            <div class="detail-row">
                                <span class="detail-label">–ò–º—è:</span>
                                <span class="detail-value" id="modal-customer-name"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                                <span class="detail-value" id="modal-customer-phone"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Email:</span>
                                <span class="detail-value" id="modal-customer-email"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–ê–¥—Ä–µ—Å:</span>
                                <span class="detail-value" id="modal-customer-address"></span>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4><i class="fas fa-info-circle"></i> –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h4>
                            <div class="detail-row">
                                <span class="detail-label">–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞:</span>
                                <span class="detail-value" id="modal-order-date"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–í—Ä–µ–º—è –∑–∞–∫–∞–∑–∞:</span>
                                <span class="detail-value" id="modal-order-time"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–°—Ç–∞—Ç—É—Å:</span>
                                <span class="detail-value">
                                    <span id="modal-order-status" class="status-badge"></span>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–ü—Ä–æ–º–æ–∫–æ–¥:</span>
                                <span class="detail-value" id="modal-promo-code"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</span>
                                <span class="detail-value" id="modal-order-comment"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="detail-section">
                            <h4><i class="fas fa-gift"></i> –¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ</h4>
                            <div class="items-details" id="modal-items-list">
                                <!-- Items will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4><i class="fas fa-money-bill-wave"></i> –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                            <div class="detail-row">
                                <span class="detail-label">–¢–æ–≤–∞—Ä—ã:</span>
                                <span class="detail-value" id="modal-subtotal"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                                <span class="detail-value" id="modal-delivery"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">–°–∫–∏–¥–∫–∞:</span>
                                <span class="detail-value" id="modal-discount"></span>
                            </div>
                            <div class="detail-row" style="border-bottom: 2px solid var(--primary-color); padding-bottom: 1rem;">
                                <span class="detail-label">–ò—Ç–æ–≥–æ:</span>
                                <span class="detail-value" id="modal-total" style="font-weight: bold; font-size: 1.2rem; color: var(--primary-color);"></span>
                            </div>
                        </div>
                        
                        <div class="detail-section status-timeline">
                            <h4><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤</h4>
                            <div id="status-timeline">
                                <!-- Status history will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn-secondary" id="btn-print">
                    <i class="fas fa-print"></i> –ü–µ—á–∞—Ç—å
                </button>
                <div class="action-buttons">
                    <button class="btn-secondary" id="btn-cancel">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                    <button class="btn-primary" id="btn-process">
                        <i class="fas fa-cogs"></i> –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É
                    </button>
                    <button class="btn-primary" id="btn-complete">
                        <i class="fas fa-check"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle" id="notification-icon"></i>
        <span id="notification-text"></span>
    </div>

    <script>
        // ==================== ORDER DATABASE ====================
        class OrderDatabase {
            constructor() {
                this.orders = this.loadOrders();
                this.currentOrderId = this.loadCurrentOrderId();
                this.lastStats = this.getStats();
                this.unreadOrders = new Set();
            }
            
            loadOrders() {
                const savedOrders = localStorage.getItem('woodadvent_orders');
                if (savedOrders) {
                    return JSON.parse(savedOrders);
                }
                
                // Create mock orders for demo
                return this.createMockOrders();
            }
            
            createMockOrders() {
                // Create 3 mock orders with realistic data
                const now = new Date();
                const yesterday = new Date(now);
                yesterday.setDate(yesterday.getDate() - 1);
                const twoDaysAgo = new Date(now);
                twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
                
                return [
                    {
                        id: 'WD-2024-1001',
                        date: twoDaysAgo.toISOString().split('T')[0],
                        time: '14:30',
                        timestamp: twoDaysAgo.getTime(),
                        customer: {
                            name: '–ò–≤–∞–Ω–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á',
                            phone: '+7 (987) 654-32-10',
                            email: 'ivanov.alex@example.com',
                            address: '–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, –¥. 10, –∫–≤. 25, –ø–æ–¥—ä–µ–∑–¥ 3, —ç—Ç–∞–∂ 5, –∫–æ–¥ –¥–æ–º–æ—Ñ–æ–Ω–∞ 25K'
                        },
                        items: [
                            { 
                                id: 1, 
                                name: '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –¥–æ–º–∏–∫ "–°–∫–∞–∑–æ—á–Ω—ã–π –ª–µ—Å"', 
                                price: 7999, 
                                quantity: 1, 
                                color: '#2E7D32',
                                features: ['–°–≤–µ—Ç–æ–¥–∏–æ–¥—ã', '–†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞', '24 —Å—é—Ä–ø—Ä–∏–∑–∞']
                            },
                            { 
                                id: 2, 
                                name: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å-–µ–ª–∫–∞ "–ó–æ–ª–æ—Ç–∞—è —Ö–≤–æ—è"', 
                                price: 8799, 
                                quantity: 1, 
                                color: '#FFA000',
                                features: ['–§–æ—Ä–º–∞ –µ–ª–∫–∏', '–ü–æ–∑–æ–ª–æ—Ç–∞', '–ù–∞—Å—Ç–µ–Ω–Ω—ã–π']
                            }
                        ],
                        subtotal: 16798,
                        delivery: 500,
                        discount: 2519.7,
                        discountCode: 'NEWYEAR24',
                        total: 14778.3,
                        comment: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏—Ç—å –∑–∞ —á–∞—Å –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏. –ù—É–∂–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ 20 –¥–µ–∫–∞–±—Ä—è. –í—Ö–æ–¥ —Å–æ –¥–≤–æ—Ä–∞.',
                        status: 'processing',
                        statusHistory: [
                            { status: 'pending', timestamp: twoDaysAgo.getTime(), note: '–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω' },
                            { status: 'processing', timestamp: twoDaysAgo.getTime() + 3600000, note: '–í–∑—è—Ç –≤ —Ä–∞–±–æ—Ç—É' }
                        ],
                        assignedTo: '–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è ‚Ññ1',
                        isNew: false
                    },
                    {
                        id: 'WD-2024-1002',
                        date: yesterday.toISOString().split('T')[0],
                        time: '10:15',
                        timestamp: yesterday.getTime() + 37800000, // 10:15
                        customer: {
                            name: '–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –ò–≥–æ—Ä–µ–≤–Ω–∞',
                            phone: '+7 (912) 345-67-89',
                            email: 'petrova.maria@example.com',
                            address: '–≥. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, –¥. 45, –∫–≤. 12, –¥–æ–º–æ—Ñ–æ–Ω 45'
                        },
                        items: [
                            { 
                                id: 4, 
                                name: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –∏–º–µ–Ω–Ω–æ–π –≥—Ä–∞–≤–∏—Ä–æ–≤–∫–æ–π', 
                                price: 9499, 
                                quantity: 2, 
                                color: '#1B5E20',
                                features: ['–ò–º—è –Ω–∞ –∑–∞–∫–∞–∑', '–ü–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å', '–≠–∫—Å–∫–ª—é–∑–∏–≤'],
                                personalization: '–ì—Ä–∞–≤–∏—Ä–æ–≤–∫–∞: "–°–µ–º—å–µ –ü–µ—Ç—Ä–æ–≤—ã—Ö —Å –ª—é–±–æ–≤—å—é. –° –ù–æ–≤—ã–º 2024 –≥–æ–¥–æ–º!"'
                            }
                        ],
                        subtotal: 18998,
                        delivery: 500,
                        discount: 0,
                        discountCode: '',
                        total: 19498,
                        comment: '–ì—Ä–∞–≤–∏—Ä–æ–≤–∫–∞ –Ω–∞ –ª–∏—Ü–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω–µ, –∑–æ–ª–æ—Ç—ã–º–∏ –±—É–∫–≤–∞–º–∏. –ù—É–∂–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ 18 –¥–µ–∫–∞–±—Ä—è.',
                        status: 'pending',
                        statusHistory: [
                            { status: 'pending', timestamp: yesterday.getTime() + 37800000, note: '–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω' }
                        ],
                        assignedTo: null,
                        isNew: true
                    },
                    {
                        id: 'WD-2024-1003',
                        date: now.toISOString().split('T')[0],
                        time: '09:45',
                        timestamp: now.getTime() - 900000, // 15 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥
                        customer: {
                            name: '–°–∏–¥–æ—Ä–æ–≤ –î–º–∏—Ç—Ä–∏–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á',
                            phone: '+7 (905) 123-45-67',
                            email: 'sidorov.dmitry@example.com',
                            address: '–≥. –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 33, –∫–≤. 12, –ø–æ–¥—ä–µ–∑–¥ 2, —ç—Ç–∞–∂ 3'
                        },
                        items: [
                            { 
                                id: 3, 
                                name: '–°—É–Ω–¥—É–∫ "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞"', 
                                price: 13999, 
                                quantity: 1, 
                                color: '#FF8F00',
                                features: ['–ó–æ–ª–æ—Ç–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞', '–ú–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–π', '–ü–æ–¥–∞—Ä–æ—á–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞']
                            },
                            { 
                                id: 6, 
                                name: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å-–µ–ª–∫–∞ "–ó–æ–ª–æ—Ç–∞—è —Ö–≤–æ—è"', 
                                price: 8799, 
                                quantity: 1, 
                                color: '#FFA000',
                                features: ['–§–æ—Ä–º–∞ –µ–ª–∫–∏', '–ü–æ–∑–æ–ª–æ—Ç–∞', '–ù–∞—Å—Ç–µ–Ω–Ω—ã–π']
                            }
                        ],
                        subtotal: 22798,
                        delivery: 500,
                        discount: 4560,
                        discountCode: 'GIFT10',
                        total: 18738,
                        comment: '–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è. –ù—É–∂–Ω–æ –∫—Ä–∞—Å–∏–≤–æ —É–ø–∞–∫–æ–≤–∞—Ç—å. –°—Ä–æ—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞!',
                        status: 'pending',
                        statusHistory: [
                            { status: 'pending', timestamp: now.getTime() - 900000, note: '–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω' }
                        ],
                        assignedTo: null,
                        isNew: true
                    }
                ];
            }
            
            loadCurrentOrderId() {
                return parseInt(localStorage.getItem('woodadvent_current_order_id') || '1003');
            }
            
            saveOrders() {
                localStorage.setItem('woodadvent_orders', JSON.stringify(this.orders));
                localStorage.setItem('woodadvent_current_order_id', this.currentOrderId.toString());
            }
            
            // ==================== CART INTEGRATION ====================
            // This method is called from the cart page when order is placed
            addOrderFromCart(orderData) {
                // Generate order ID
                this.currentOrderId++;
                const orderId = `WD-${new Date().getFullYear()}-${this.currentOrderId}`;
                
                // Get current timestamp
                const now = new Date();
                const date = now.toISOString().split('T')[0];
                const time = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
                
                // Create full order object with all customer data
                const order = {
                    id: orderId,
                    date: date,
                    time: time,
                    timestamp: now.getTime(),
                    customer: {
                        name: orderData.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                        phone: orderData.phone || '–ù–µ —É–∫–∞–∑–∞–Ω',
                        email: orderData.email || '–ù–µ —É–∫–∞–∑–∞–Ω',
                        address: orderData.address || '–ù–µ —É–∫–∞–∑–∞–Ω'
                    },
                    items: orderData.items || [],
                    subtotal: orderData.subtotal || 0,
                    delivery: orderData.delivery || 500,
                    discount: orderData.discount || 0,
                    discountCode: orderData.discountCode || '',
                    total: orderData.total || 0,
                    comment: orderData.comment || '',
                    status: 'pending',
                    statusHistory: [
                        { 
                            status: 'pending', 
                            timestamp: now.getTime(), 
                            note: '–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç–æ–º –Ω–∞ —Å–∞–π—Ç–µ' 
                        }
                    ],
                    assignedTo: null,
                    isNew: true,
                    source: 'website'
                };
                
                // Add to beginning of array (newest first)
                this.orders.unshift(order);
                this.saveOrders();
                
                // Mark as unread
                this.unreadOrders.add(orderId);
                
                // Notify admin panel
                this.notifyNewOrder(orderId);
                
                return orderId;
            }
            
            notifyNewOrder(orderId) {
                // Send notification to admin panel
                if (window.adminPanel) {
                    window.adminPanel.onNewOrder(orderId);
                }
                
                // Also save in localStorage for cross-tab communication
                localStorage.setItem('woodadvent_last_order', JSON.stringify({
                    id: orderId,
                    timestamp: Date.now()
                }));
            }
            
            // ==================== ORDER MANAGEMENT ====================
            getOrders(filter = 'all', search = '', dateFrom = '', dateTo = '') {
                let filteredOrders = [...this.orders];
                
                // Apply status filter
                if (filter !== 'all') {
                    filteredOrders = filteredOrders.filter(order => order.status === filter);
                }
                
                // Apply search
                if (search) {
                    const searchLower = search.toLowerCase();
                    filteredOrders = filteredOrders.filter(order => 
                        order.id.toLowerCase().includes(searchLower) ||
                        order.customer.name.toLowerCase().includes(searchLower) ||
                        order.customer.phone.includes(search) ||
                        order.customer.email.toLowerCase().includes(searchLower) ||
                        order.customer.address.toLowerCase().includes(searchLower)
                    );
                }
                
                // Apply date filter
                if (dateFrom) {
                    filteredOrders = filteredOrders.filter(order => order.date >= dateFrom);
                }
                if (dateTo) {
                    filteredOrders = filteredOrders.filter(order => order.date <= dateTo);
                }
                
                return filteredOrders;
            }
            
            getOrderById(orderId) {
                return this.orders.find(order => order.id === orderId);
            }
            
            updateOrderStatus(orderId, newStatus, note = '') {
                const order = this.getOrderById(orderId);
                if (!order) return false;
                
                const oldStatus = order.status;
                order.status = newStatus;
                
                // Add to status history
                order.statusHistory.push({
                    status: newStatus,
                    timestamp: Date.now(),
                    note: note || `–°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω —Å "${this.getStatusText(oldStatus)}" –Ω–∞ "${this.getStatusText(newStatus)}"`
                });
                
                // If order is being processed, assign to current admin
                if (newStatus === 'processing') {
                    order.assignedTo = '–¢–µ–∫—É—â–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä';
                }
                
                // Mark as read when status changes
                this.markAsRead(orderId);
                
                this.saveOrders();
                return true;
            }
            
            markAsRead(orderId) {
                this.unreadOrders.delete(orderId);
            }
            
            markAllAsRead() {
                this.unreadOrders.clear();
            }
            
            getUnreadCount() {
                return this.unreadOrders.size;
            }
            
            getNewOrders() {
                return this.orders.filter(order => order.isNew);
            }
            
            deleteOrder(orderId) {
                const index = this.orders.findIndex(order => order.id === orderId);
                if (index !== -1) {
                    this.orders.splice(index, 1);
                    this.unreadOrders.delete(orderId);
                    this.saveOrders();
                    return true;
                }
                return false;
            }
            
            getStats() {
                const total = this.orders.length;
                const processing = this.orders.filter(o => o.status === 'processing').length;
                const completed = this.orders.filter(o => o.status === 'completed').length;
                const pending = this.orders.filter(o => o.status === 'pending').length;
                const cancelled = this.orders.filter(o => o.status === 'cancelled').length;
                const newOrders = this.orders.filter(o => o.isNew).length;
                const today = new Date().toISOString().split('T')[0];
                const todayOrders = this.orders.filter(o => o.date === today).length;
                
                return { total, processing, completed, pending, cancelled, newOrders, todayOrders };
            }
            
            getStatsChange() {
                const currentStats = this.getStats();
                const changes = {};
                
                for (const key in currentStats) {
                    changes[key] = currentStats[key] - (this.lastStats[key] || 0);
                }
                
                this.lastStats = currentStats;
                return changes;
            }
            
            formatPrice(price) {
                return new Intl.NumberFormat('ru-RU').format(price) + ' ‚ÇΩ';
            }
            
            formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('ru-RU');
            }
            
            formatDateTime(dateString, timeString) {
                return `${this.formatDate(dateString)} ${timeString}`;
            }
            
            getStatusText(status) {
                const statusMap = {
                    'pending': 'üÜï –û–∂–∏–¥–∞–µ—Ç',
                    'processing': '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ',
                    'completed': '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω',
                    'cancelled': '‚ùå –û—Ç–º–µ–Ω–µ–Ω'
                };
                return statusMap[status] || status;
            }
            
            getStatusIcon(status) {
                const iconMap = {
                    'pending': 'fas fa-clock',
                    'processing': 'fas fa-cogs',
                    'completed': 'fas fa-check-circle',
                    'cancelled': 'fas fa-times-circle'
                };
                return iconMap[status] || 'fas fa-question-circle';
            }
        }

        // ==================== ADMIN PANEL ====================
        class AdminPanel {
            constructor() {
                this.db = new OrderDatabase();
                this.currentFilter = 'all';
                this.currentPage = 1;
                this.ordersPerPage = 10;
                this.currentOrder = null;
                this.newOrdersCount = 0;
                
                this.init();
            }
            
            init() {
                // Load and display orders
                this.loadOrders();
                
                // Setup event listeners
                this.setupEventListeners();
                
                // Setup real-time updates
                this.setupRealTimeUpdates();
                
                // Check for new orders from cart
                this.checkForNewOrders();
            }
            
            setupEventListeners() {
                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const filter = e.target.dataset.filter;
                        this.setFilter(filter);
                    });
                });
                
                // Search input
                document.getElementById('search-input').addEventListener('input', (e) => {
                    this.searchOrders(e.target.value);
                });
                
                // Date filters
                document.getElementById('date-from').addEventListener('change', () => {
                    this.applyDateFilter();
                });
                
                document.getElementById('date-to').addEventListener('change', () => {
                    this.applyDateFilter();
                });
                
                // Logout button
                document.querySelector('.logout-btn').addEventListener('click', () => {
                    if (confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏?')) {
                        window.location.href = 'index.html';
                    }
                });
                
                // Close modal
                document.getElementById('close-modal').addEventListener('click', () => {
                    this.closeModal();
                });
                
                // Modal actions
                document.getElementById('btn-print').addEventListener('click', () => {
                    this.printOrder();
                });
                
                document.getElementById('btn-process').addEventListener('click', () => {
                    this.updateOrderStatus('processing', '–í–∑—è—Ç –≤ —Ä–∞–±–æ—Ç—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º');
                });
                
                document.getElementById('btn-complete').addEventListener('click', () => {
                    this.updateOrderStatus('completed', '–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω');
                });
                
                document.getElementById('btn-cancel').addEventListener('click', () => {
                    this.cancelOrder();
                });
                
                // Close modal on outside click
                document.getElementById('order-modal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('order-modal')) {
                        this.closeModal();
                    }
                });
                
                // New orders alert
                document.getElementById('show-new-orders').addEventListener('click', () => {
                    this.setFilter('pending');
                    this.db.markAllAsRead();
                    this.updateAlert();
                });
            }
            
            setupRealTimeUpdates() {
                // Check for new orders every 2 seconds
                setInterval(() => {
                    this.checkForNewOrders();
                }, 2000);
                
                // Listen for storage events (cross-tab communication)
                window.addEventListener('storage', (e) => {
                    if (e.key === 'woodadvent_last_order') {
                        this.checkForNewOrders();
                    }
                });
            }
            
            checkForNewOrders() {
                const newCount = this.db.getUnreadCount();
                if (newCount !== this.newOrdersCount) {
                    this.newOrdersCount = newCount;
                    this.updateAlert();
                    if (newCount > 0) {
                        this.loadOrders(); // Refresh orders list
                    }
                }
            }
            
            updateAlert() {
                const alert = document.getElementById('new-orders-alert');
                const message = document.getElementById('alert-message');
                
                if (this.newOrdersCount > 0) {
                    alert.classList.remove('hidden');
                    message.innerHTML = `–ù–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤: <strong>${this.newOrdersCount}</strong>`;
                } else {
                    alert.classList.add('hidden');
                }
            }
            
            onNewOrder(orderId) {
                // Show notification
                this.showNotification(`–ü–æ—Å—Ç—É–ø–∏–ª –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑: ${orderId}`, 'info');
                
                // Update stats
                this.updateStats();
                
                // Refresh orders if on "all" or "pending" filter
                if (this.currentFilter === 'all' || this.currentFilter === 'pending') {
                    this.loadOrders();
                }
            }
            
            loadOrders() {
                const orders = this.db.getOrders(this.currentFilter);
                this.updateStats();
                this.renderOrdersTable(orders);
                this.updatePagination(orders.length);
            }
            
            updateStats() {
                const stats = this.db.getStats();
                const changes = this.db.getStatsChange();
                
                // Update numbers
                document.getElementById('total-orders').textContent = stats.total;
                document.getElementById('processing-orders').textContent = stats.processing;
                document.getElementById('completed-orders').textContent = stats.completed;
                document.getElementById('pending-orders').textContent = stats.pending;
                
                // Update changes
                this.updateStatChange('total-change', changes.total);
                this.updateStatChange('processing-change', changes.processing);
                this.updateStatChange('completed-change', changes.completed);
                this.updateStatChange('pending-change', changes.pending);
            }
            
            updateStatChange(elementId, change) {
                const element = document.getElementById(elementId);
                if (change > 0) {
                    element.innerHTML = `<span class="stat-change positive">+${change} —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</span>`;
                } else if (change < 0) {
                    element.innerHTML = `<span class="stat-change negative">${change} —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</span>`;
                } else {
                    element.innerHTML = '';
                }
            }
            
            renderOrdersTable(orders) {
                const tbody = document.getElementById('orders-table-body');
                const emptyState = document.getElementById('empty-state');
                
                if (orders.length === 0) {
                    tbody.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }
                
                emptyState.style.display = 'none';
                
                // Calculate pagination
                const startIndex = (this.currentPage - 1) * this.ordersPerPage;
                const endIndex = startIndex + this.ordersPerPage;
                const pagedOrders = orders.slice(startIndex, endIndex);
                
                let html = '';
                
                pagedOrders.forEach(order => {
                    // Calculate total items count
                    const totalItems = order.items.reduce((sum, item) => sum + item.quantity, 0);
                    
                    // Get status badge class
                    const statusClass = `status-${order.status}`;
                    const statusText = this.db.getStatusText(order.status);
                    
                    // Check if order is new (unread)
                    const isNew = this.db.unreadOrders.has(order.id);
                    const newClass = isNew ? ' new-order' : '';
                    const newBadge = isNew ? ' new' : '';
                    
                    html += `
                        <tr data-order-id="${order.id}" class="${newClass}">
                            <td>
                                <div class="order-id${newBadge}">${order.id}</div>
                                ${order.source === 'website' ? '<span style="font-size: 0.7rem; color: #666;">–æ–Ω–ª–∞–π–Ω</span>' : ''}
                            </td>
                            <td>
                                <div class="order-date">${this.db.formatDateTime(order.date, order.time)}</div>
                            </td>
                            <td>
                                <div class="customer-info">
                                    <div class="customer-name">${order.customer.name}</div>
                                    <div class="customer-phone">${order.customer.phone}</div>
                                </div>
                            </td>
                            <td>
                                <div class="items-list">
                                    ${order.items.slice(0, 2).map(item => `
                                        <div class="item-row">
                                            <span class="item-name">${item.name}</span>
                                            <span class="item-quantity">√ó${item.quantity}</span>
                                        </div>
                                    `).join('')}
                                    ${order.items.length > 2 ? 
                                        `<div class="item-row">
                                            <span class="item-name">–∏ –µ—â–µ ${order.items.length - 2} —Ç–æ–≤–∞—Ä–∞</span>
                                        </div>` : ''
                                    }
                                    <div class="item-row" style="margin-top: 0.5rem;">
                                        <span>–í—Å–µ–≥–æ: ${totalItems} —à—Ç.</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="order-total">${this.db.formatPrice(order.total)}</div>
                            </td>
                            <td>
                                <span class="status-badge ${statusClass}">${statusText}</span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn btn-view view-order" data-order-id="${order.id}">
                                        <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                    </button>
                                    ${order.status === 'pending' ? `
                                        <button class="action-btn btn-process process-order" data-order-id="${order.id}">
                                            <i class="fas fa-cogs"></i> –í–∑—è—Ç—å
                                        </button>
                                    ` : ''}
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                tbody.innerHTML = html;
                
                // Update orders count
                const orderWord = this.getOrderWord(orders.length);
                document.getElementById('orders-count').textContent = `${orders.length} ${orderWord}`;
                
                // Attach event listeners to new buttons
                this.attachTableEventListeners();
            }
            
            getOrderWord(count) {
                if (count % 10 === 1 && count % 100 !== 11) return '–∑–∞–∫–∞–∑';
                if (count % 10 >= 2 && count % 10 <= 4 && (count % 100 < 10 || count % 100 >= 20)) return '–∑–∞–∫–∞–∑–∞';
                return '–∑–∞–∫–∞–∑–æ–≤';
            }
            
            attachTableEventListeners() {
                // View order buttons
                document.querySelectorAll('.view-order').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const orderId = e.target.closest('button').dataset.orderId;
                        this.showOrderDetails(orderId);
                        this.db.markAsRead(orderId);
                        this.updateAlert();
                    });
                });
                
                // Process order buttons
                document.querySelectorAll('.process-order').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const orderId = e.target.closest('button').dataset.orderId;
                        this.updateOrderStatus('processing', '–í–∑—è—Ç –≤ —Ä–∞–±–æ—Ç—É', orderId);
                    });
                });
            }
            
            updatePagination(totalOrders) {
                const pagination = document.getElementById('pagination');
                const totalPages = Math.ceil(totalOrders / this.ordersPerPage);
                
                if (totalPages <= 1) {
                    pagination.innerHTML = '';
                    return;
                }
                
                let html = '';
                
                // Previous button
                html += `
                    <button class="page-btn prev-page" ${this.currentPage === 1 ? 'disabled' : ''}>
                        <i class="fas fa-chevron-left"></i>
                    </button>
                `;
                
                // Page numbers
                const maxVisiblePages = 5;
                let startPage = Math.max(1, this.currentPage - Math.floor(maxVisiblePages / 2));
                let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
                
                if (endPage - startPage + 1 < maxVisiblePages) {
                    startPage = Math.max(1, endPage - maxVisiblePages + 1);
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    html += `
                        <button class="page-btn ${i === this.currentPage ? 'active' : ''}" data-page="${i}">
                            ${i}
                        </button>
                    `;
                }
                
                // Next button
                html += `
                    <button class="page-btn next-page" ${this.currentPage === totalPages ? 'disabled' : ''}>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                `;
                
                pagination.innerHTML = html;
                
                // Attach pagination event listeners
                document.querySelectorAll('.page-btn:not(.prev-page):not(.next-page)').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const page = parseInt(e.target.dataset.page);
                        this.goToPage(page);
                    });
                });
                
                document.querySelector('.prev-page')?.addEventListener('click', () => {
                    if (this.currentPage > 1) {
                        this.goToPage(this.currentPage - 1);
                    }
                });
                
                document.querySelector('.next-page')?.addEventListener('click', () => {
                    if (this.currentPage < totalPages) {
                        this.goToPage(this.currentPage + 1);
                    }
                });
            }
            
            goToPage(page) {
                this.currentPage = page;
                this.loadOrders();
                
                // Scroll to top of table
                document.querySelector('.orders-section').scrollIntoView({ behavior: 'smooth' });
            }
            
            setFilter(filter) {
                this.currentFilter = filter;
                this.currentPage = 1;
                
                // Update active filter button
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.filter === filter) {
                        btn.classList.add('active');
                    }
                });
                
                this.loadOrders();
            }
            
            searchOrders(query) {
                this.currentPage = 1;
                this.loadOrders();
            }
            
            applyDateFilter() {
                const dateFrom = document.getElementById('date-from').value;
                const dateTo = document.getElementById('date-to').value;
                
                this.currentPage = 1;
                this.loadOrders();
            }
            
            showOrderDetails(orderId) {
                const order = this.db.getOrderById(orderId);
                if (!order) return;
                
                this.currentOrder = order;
                
                // Populate modal
                document.getElementById('modal-order-id').textContent = order.id;
                document.getElementById('modal-customer-name').textContent = order.customer.name;
                document.getElementById('modal-customer-phone').textContent = order.customer.phone;
                document.getElementById('modal-customer-email').textContent = order.customer.email;
                document.getElementById('modal-customer-address').textContent = order.customer.address;
                document.getElementById('modal-order-date').textContent = this.db.formatDate(order.date);
                document.getElementById('modal-order-time').textContent = order.time;
                document.getElementById('modal-order-comment').textContent = order.comment || '‚Äî';
                document.getElementById('modal-promo-code').textContent = order.discountCode || '‚Äî';
                document.getElementById('modal-subtotal').textContent = this.db.formatPrice(order.subtotal);
                document.getElementById('modal-delivery').textContent = this.db.formatPrice(order.delivery);
                document.getElementById('modal-discount').textContent = order.discount > 0 ? 
                    `-${this.db.formatPrice(order.discount)} ${order.discountCode ? `(${order.discountCode})` : ''}` : '‚Äî';
                document.getElementById('modal-total').textContent = this.db.formatPrice(order.total);
                
                // Status badge
                const statusBadge = document.getElementById('modal-order-status');
                statusBadge.textContent = this.db.getStatusText(order.status);
                statusBadge.className = `status-badge status-${order.status}`;
                
                // Items list
                const itemsList = document.getElementById('modal-items-list');
                itemsList.innerHTML = order.items.map(item => `
                    <div class="item-detail">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <div>
                                <strong>${item.name}</strong>
                                ${item.personalization ? `<div style="color: #666; font-size: 0.9rem; margin-top: 0.3rem;"><i>${item.personalization}</i></div>` : ''}
                            </div>
                            <span>${this.db.formatPrice(item.price)} √ó ${item.quantity}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <div>
                                <span style="color: #666; font-size: 0.8rem;">–ê—Ä—Ç–∏–∫—É–ª: ${item.id}</span>
                                ${item.features ? `<div style="margin-top: 0.3rem;">${item.features.map(f => `<span style="background: #e0e0e0; padding: 0.2rem 0.5rem; border-radius: 3px; font-size: 0.8rem; margin-right: 0.3rem;">${f}</span>`).join('')}</div>` : ''}
                            </div>
                            <strong>${this.db.formatPrice(item.price * item.quantity)}</strong>
                        </div>
                    </div>
                `).join('');
                
                // Status timeline
                const timeline = document.getElementById('status-timeline');
                timeline.innerHTML = order.statusHistory.map(entry => {
                    const date = new Date(entry.timestamp);
                    const timeString = date.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
                    const dateString = date.toLocaleDateString('ru-RU');
                    const isActive = entry.status === order.status;
                    
                    return `
                        <div class="timeline-item ${isActive ? 'active' : ''}">
                            <div class="timeline-icon">
                                <i class="${this.db.getStatusIcon(entry.status)}"></i>
                            </div>
                            <div class="timeline-content">
                                <strong>${this.db.getStatusText(entry.status)}</strong>
                                <p>${dateString} ${timeString}</p>
                                ${entry.note ? `<p style="font-size: 0.9rem; color: #666;">${entry.note}</p>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Show/hide action buttons based on status
                this.updateActionButtons(order.status);
                
                // Show modal
                document.getElementById('order-modal').style.display = 'flex';
            }
            
            updateActionButtons(status) {
                const processBtn = document.getElementById('btn-process');
                const completeBtn = document.getElementById('btn-complete');
                const cancelBtn = document.getElementById('btn-cancel');
                
                // Reset all buttons
                processBtn.style.display = 'inline-flex';
                completeBtn.style.display = 'inline-flex';
                cancelBtn.style.display = 'inline-flex';
                
                switch (status) {
                    case 'pending':
                        processBtn.style.display = 'inline-flex';
                        completeBtn.style.display = 'none';
                        cancelBtn.textContent = '–û—Ç–º–µ–Ω–∏—Ç—å';
                        break;
                    case 'processing':
                        processBtn.style.display = 'none';
                        completeBtn.style.display = 'inline-flex';
                        cancelBtn.textContent = '–û—Ç–º–µ–Ω–∏—Ç—å';
                        break;
                    case 'completed':
                        processBtn.style.display = 'none';
                        completeBtn.style.display = 'none';
                        cancelBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
                        break;
                    case 'cancelled':
                        processBtn.style.display = 'none';
                        completeBtn.style.display = 'none';
                        cancelBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
                        break;
                }
            }
            
            closeModal() {
                document.getElementById('order-modal').style.display = 'none';
                this.currentOrder = null;
            }
            
            updateOrderStatus(newStatus, note = '', orderId = null) {
                const targetOrderId = orderId || this.currentOrder?.id;
                if (!targetOrderId) return;
                
                if (this.db.updateOrderStatus(targetOrderId, newStatus, note)) {
                    this.showNotification(`–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ ${targetOrderId} –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ "${this.db.getStatusText(newStatus)}"`, 'success');
                    this.loadOrders();
                    
                    if (this.currentOrder) {
                        this.showOrderDetails(targetOrderId);
                    }
                }
            }
            
            cancelOrder() {
                if (!this.currentOrder) return;
                
                if (this.currentOrder.status === 'completed' || this.currentOrder.status === 'cancelled') {
                    // Delete order
                    if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–∫–∞–∑ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?')) {
                        this.db.deleteOrder(this.currentOrder.id);
                        this.showNotification(`–ó–∞–∫–∞–∑ ${this.currentOrder.id} —É–¥–∞–ª–µ–Ω`, 'success');
                        this.closeModal();
                        this.loadOrders();
                    }
                } else {
                    // Cancel order
                    if (confirm('–û—Ç–º–µ–Ω–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–∫–∞–∑? –ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω.')) {
                        this.updateOrderStatus('cancelled', '–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º');
                    }
                }
            }
            
            printOrder() {
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                    <head>
                        <title>–ó–∞–∫–∞–∑ ${this.currentOrder.id}</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; }
                            h1 { color: #1A237E; }
                            .section { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; }
                            .row { display: flex; justify-content: space-between; margin-bottom: 10px; }
                            .label { font-weight: bold; color: #666; }
                            .item { margin-bottom: 10px; padding: 10px; background: #f5f5f5; }
                            @media print {
                                .no-print { display: none; }
                            }
                        </style>
                    </head>
                    <body>
                        <h1>–ó–∞–∫–∞–∑ ${this.currentOrder.id}</h1>
                        <div class="section">
                            <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ</h2>
                            <div class="row"><span class="label">–ò–º—è:</span> ${this.currentOrder.customer.name}</div>
                            <div class="row"><span class="label">–¢–µ–ª–µ—Ñ–æ–Ω:</span> ${this.currentOrder.customer.phone}</div>
                            <div class="row"><span class="label">Email:</span> ${this.currentOrder.customer.email}</div>
                            <div class="row"><span class="label">–ê–¥—Ä–µ—Å:</span> ${this.currentOrder.customer.address}</div>
                        </div>
                        <div class="section">
                            <h2>–¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ</h2>
                            ${this.currentOrder.items.map(item => `
                                <div class="item">
                                    <div class="row"><strong>${item.name}</strong> √ó${item.quantity}</div>
                                    <div class="row"><span class="label">–¶–µ–Ω–∞:</span> ${this.db.formatPrice(item.price)}</div>
                                    <div class="row"><span class="label">–°—É–º–º–∞:</span> ${this.db.formatPrice(item.price * item.quantity)}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="section">
                            <h2>–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                            <div class="row"><span class="label">–¢–æ–≤–∞—Ä—ã:</span> ${this.db.formatPrice(this.currentOrder.subtotal)}</div>
                            <div class="row"><span class="label">–î–æ—Å—Ç–∞–≤–∫–∞:</span> ${this.db.formatPrice(this.currentOrder.delivery)}</div>
                            <div class="row"><span class="label">–°–∫–∏–¥–∫–∞:</span> -${this.db.formatPrice(this.currentOrder.discount)} ${this.currentOrder.discountCode ? `(${this.currentOrder.discountCode})` : ''}</div>
                            <div class="row" style="border-top: 2px solid #000; padding-top: 10px; margin-top: 10px;">
                                <span class="label" style="font-size: 1.2em;">–ò—Ç–æ–≥–æ:</span> 
                                <strong style="font-size: 1.2em;">${this.db.formatPrice(this.currentOrder.total)}</strong>
                            </div>
                        </div>
                        <div class="section">
                            <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</h2>
                            <p>${this.currentOrder.comment || '‚Äî'}</p>
                        </div>
                        <div class="section no-print">
                            <button onclick="window.print()">–ü–µ—á–∞—Ç—å</button>
                            <button onclick="window.close()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    </body>
                    </html>
                `);
                printWindow.document.close();
            }
            
            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                const notificationIcon = document.getElementById('notification-icon');
                const notificationText = document.getElementById('notification-text');
                
                // Set icon based on type
                switch (type) {
                    case 'success':
                        notificationIcon.className = 'fas fa-check-circle';
                        break;
                    case 'error':
                        notificationIcon.className = 'fas fa-exclamation-circle';
                        break;
                    case 'warning':
                        notificationIcon.className = 'fas fa-exclamation-triangle';
                        break;
                    case 'info':
                        notificationIcon.className = 'fas fa-info-circle';
                        break;
                }
                
                notificationText.textContent = message;
                notification.className = `notification show ${type}`;
                
                // Auto hide
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }

        // ==================== INTEGRATION WITH CART ====================
        // This function will be called from the cart page
        function receiveOrderFromCart(orderData) {
            const db = new OrderDatabase();
            const orderId = db.addOrderFromCart(orderData);
            
            console.log(`Order ${orderId} received from cart:`, orderData);
            
            // Notify admin panel if it's open
            if (window.adminPanel) {
                window.adminPanel.onNewOrder(orderId);
            }
            
            return orderId;
        }

        // Simulate receiving an order (for demo purposes)
        function simulateOrderFromCart() {
            const mockOrderData = {
                name: '–¢–µ—Å—Ç–æ–≤—ã–π –ö–ª–∏–µ–Ω—Ç',
                phone: '+7 (999) 888-77-66',
                email: 'test@example.com',
                address: '–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–µ—Å—Ç–æ–≤–∞—è, –¥. 1, –∫–≤. 1',
                items: [
                    {
                        id: 1,
                        name: '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –¥–æ–º–∏–∫ "–°–∫–∞–∑–æ—á–Ω—ã–π –ª–µ—Å"',
                        price: 7999,
                        quantity: 2,
                        color: '#2E7D32',
                        features: ['–°–≤–µ—Ç–æ–¥–∏–æ–¥—ã', '–†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞', '24 —Å—é—Ä–ø—Ä–∏–∑–∞']
                    }
                ],
                subtotal: 15998,
                delivery: 500,
                discount: 2400,
                discountCode: 'SANTA2024',
                total: 14098,
                comment: '–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.'
            };
            
            receiveOrderFromCart(mockOrderData);
        }

        // Initialize admin panel when page loads
        document.addEventListener('DOMContentLoaded', () => {
            const adminPanel = new AdminPanel();
            
            // Expose to window for debugging and integration
            window.adminPanel = adminPanel;
            window.receiveOrderFromCart = receiveOrderFromCart;
            
            // Auto-refresh every 30 seconds
            setInterval(() => {
                adminPanel.loadOrders();
            }, 30000);
            
            // Demo: Simulate receiving orders periodically
            setInterval(() => {
                if (Math.random() > 0.7) { // 30% chance
                    simulateOrderFromCart();
                }
            }, 15000);
        });

        // ==================== CART SITE INTEGRATION ====================
        // Add this to your cart.html page to send orders to admin panel:
        /*
        // In cart.html, after order is placed successfully:
        
        function sendOrderToAdmin(orderData) {
            // Prepare order data from cart
            const orderToSend = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                items: cartManager.cart,
                subtotal: cartManager.getSubtotal(),
                delivery: cartManager.deliveryCost,
                discount: cartManager.discountAmount,
                discountCode: cartManager.discountCode,
                total: cartManager.getTotal(),
                comment: document.getElementById('comment').value
            };
            
            // Save to localStorage (for admin panel on same domain)
            localStorage.setItem('woodadvent_last_cart_order', JSON.stringify(orderToSend));
            
            // If admin panel is in another tab/window
            if (window.opener && window.opener.receiveOrderFromCart) {
                window.opener.receiveOrderFromCart(orderToSend);
            }
            
            // Also save to admin database directly
            localStorage.setItem('woodadvent_new_order', JSON.stringify(orderToSend));
            
            // Broadcast to other tabs
            window.localStorage.setItem('woodadvent_order_update', Date.now().toString());
        }
        */
    </script>
</body>
</html>
